INSTALL PROJECT
===============================================================
$ composer create-project symfony/website-skeleton Authentication ^4.4.0
---------------------------------------------------------------
$ composer create-project symfony/website-skeleton:^4.4 Authentication
Installing symfony/website-skeleton (v4.4.99)
  - Installing symfony/website-skeleton (v4.4.99): Loading from cache
Created project in Authentication
Loading composer repositories with package information
Updating dependencies (including require-dev)
Package operations: 1 install, 0 updates, 0 removals
  - Installing symfony/flex (v1.6.2): Loading from cache
Symfony operations: 1 recipe (f7b05fc40d5898d8119b836743c66f9f)
  - Configuring symfony/flex (>=1.0): From github.com/symfony/recipes:master
Loading composer repositories with package information
Updating dependencies (including require-dev)
Restricting packages listed in "symfony/symfony" to "4.4.*"
Package operations: 102 installs, 0 updates, 0 removals
  - Installing ocramius/package-versions (1.4.2): Loading from cache
  - Installing symfony/polyfill-mbstring (v1.13.1): Loading from cache
  - Installing twig/twig (v3.0.1): Loading from cache
  - Installing symfony/translation-contracts (v2.0.1): Loading from cache
  - Installing psr/container (1.0.0): Loading from cache
  - Installing psr/cache (1.0.1): Loading from cache
  - Installing symfony/twig-bridge (v4.4.4): Loading from cache
  - Installing symfony/polyfill-php73 (v1.13.1): Loading from cache
  - Installing symfony/polyfill-php72 (v1.13.1): Loading from cache
  - Installing symfony/polyfill-intl-idn (v1.13.1): Loading from cache
  - Installing symfony/mime (v4.4.4): Loading from cache
  - Installing symfony/http-foundation (v4.4.4): Loading from cache
  - Installing symfony/event-dispatcher-contracts (v1.1.7): Loading from cache
  - Installing symfony/event-dispatcher (v4.4.4): Loading from cache
  - Installing symfony/var-dumper (v4.4.4): Loading from cache
  - Installing psr/log (1.1.2): Loading from cache
  - Installing symfony/debug (v4.4.4): Loading from cache
  - Installing symfony/error-handler (v4.4.4): Loading from cache
  - Installing symfony/http-kernel (v4.4.4): Loading from cache
  - Installing symfony/twig-bundle (v4.4.4): Loading from cache
  - Installing symfony/routing (v4.4.4): Loading from cache
  - Installing symfony/finder (v4.4.4): Loading from cache
  - Installing symfony/filesystem (v4.4.4): Loading from cache
  - Installing symfony/service-contracts (v2.0.1): Loading from cache
  - Installing symfony/dependency-injection (v4.4.4): Loading from cache
  - Installing symfony/config (v4.4.4): Loading from cache
  - Installing symfony/var-exporter (v4.4.4): Loading from cache
  - Installing symfony/cache-contracts (v2.0.1): Loading from cache
  - Installing symfony/cache (v4.4.4): Loading from cache
                              - Installing symfony/framework-bundle (v4.4.4): Loading from cache
  - Installing twig/extra-bundle (v3.0.1): Loading from cache
  - Installing symfony/twig-pack (v1.0.0): Loading from cache
  - Installing doctrine/lexer (1.2.0): Loading from cache
  - Installing doctrine/annotations (v1.8.0): Loading from cache
  - Installing sensio/framework-extra-bundle (v5.5.3): Loading from cache
  - Installing symfony/asset (v4.4.4): Loading from cache
  - Installing symfony/dotenv (v4.4.4): Loading from cache
  - Installing symfony/expression-language (v4.4.4): Loading from cache
  - Installing symfony/inflector (v4.4.4): Loading from cache
  - Installing symfony/property-access (v4.4.4): Loading from cache
  - Installing symfony/options-resolver (v4.4.4): Loading from cache
  - Installing symfony/intl (v4.4.4): Loading from cache
  - Installing symfony/polyfill-intl-icu (v1.13.1): Loading from cache
  - Installing symfony/form (v4.4.4): Loading from cache
  - Installing symfony/http-client-contracts (v2.0.1): Loading from cache
  - Installing symfony/http-client (v4.4.4): Loading from cache
  - Installing egulias/email-validator (2.1.15): Loading from cache
  - Installing symfony/mailer (v4.4.4): Loading from cache
  - Installing symfony/stopwatch (v4.4.4): Loading from cache
  - Installing symfony/console (v4.4.4): Loading from cache
  - Installing zendframework/zend-eventmanager (3.2.1): Loading from cache
  - Installing zendframework/zend-code (3.4.1): Loading from cache
  - Installing ocramius/proxy-manager (2.2.3): Loading from cache
  - Installing doctrine/event-manager (1.1.0): Loading from cache
  - Installing doctrine/cache (1.10.0): Loading from cache
  - Installing doctrine/dbal (v2.10.1): Loading from cache
  - Installing doctrine/reflection (v1.1.0): Loading from cache
  - Installing doctrine/collections (1.6.4): Loading from cache
  - Installing doctrine/persistence (1.3.6): Loading from cache
  - Installing doctrine/inflector (1.3.1): Loading from cache
  - Installing doctrine/common (2.12.0): Loading from cache
  - Installing doctrine/migrations (2.2.1): Loading from cache
  - Installing symfony/doctrine-bridge (v4.4.4): Loading from cache
  - Installing symfony/security-core (v4.4.4): Loading from cache
  - Installing jdorn/sql-formatter (v1.2.17): Loading from cache
  - Installing symfony/yaml (v4.4.4): Loading from cache
  - Installing doctrine/doctrine-bundle (2.0.7): Loading from cache
  - Installing doctrine/doctrine-migrations-bundle (2.1.2): Loading from cache
  - Installing doctrine/instantiator (1.3.0): Loading from cache
  - Installing doctrine/orm (v2.7.0): Loading from cache
  - Installing symfony/orm-pack (v1.0.7): Loading from cache
  - Installing symfony/process (v4.4.4): Loading from cache
  - Installing symfony/security-http (v4.4.4): Loading from cache
  - Installing symfony/security-guard (v4.4.4): Loading from cache
  - Installing symfony/security-csrf (v4.4.4): Loading from cache
  - Installing symfony/security-bundle (v4.4.4): Loading from cache
  - Installing symfony/serializer (v4.4.4): Loading from cache
  - Installing symfony/property-info (v4.4.4): Loading from cache
  - Installing webmozart/assert (1.6.0): Loading from cache
  - Installing phpdocumentor/reflection-common (2.0.0): Loading from cache
  - Installing phpdocumentor/type-resolver (1.0.1): Loading from cache
  - Installing phpdocumentor/reflection-docblock (4.3.4): Loading from cache
  - Installing symfony/serializer-pack (v1.0.2): Loading from cache
  - Installing symfony/translation (v4.4.4): Loading from cache
  - Installing symfony/validator (v4.4.4): Loading from cache
  - Installing psr/link (1.0.0): Loading from cache
  - Installing symfony/web-link (v4.4.4): Loading from cache
  - Installing symfony/web-profiler-bundle (v4.4.4): Loading from cache
  - Installing symfony/profiler-pack (v1.0.4): Loading from cache
  - Installing monolog/monolog (1.25.3): Loading from cache
  - Installing easycorp/easy-log-handler (v1.0.9): Loading from cache
  - Installing symfony/monolog-bridge (v4.4.4): Loading from cache
  - Installing symfony/monolog-bundle (v3.5.0): Loading from cache
  - Installing symfony/debug-bundle (v4.4.4): Loading from cache
  - Installing symfony/debug-pack (v1.0.7): Loading from cache
  - Installing nikic/php-parser (v4.3.0): Loading from cache
  - Installing symfony/maker-bundle (v1.14.3): Loading from cache
  - Installing symfony/phpunit-bridge (v5.0.4): Loading from cache
  - Installing symfony/css-selector (v4.4.4): Loading from cache
  - Installing symfony/dom-crawler (v4.4.4): Loading from cache
  - Installing symfony/browser-kit (v4.4.4): Loading from cache
  - Installing symfony/test-pack (v1.0.6): Loading from cache
Package zendframework/zend-eventmanager is abandoned, you should avoid using it. Use laminas/laminas-eventmanager instead.
Package zendframework/zend-code is abandoned, you should avoid using it. Use laminas/laminas-code instead.
Writing lock file
Generating autoload files
Symfony operations: 19 recipes (f7b05fc40d5898d8119b836743c66f9f)
  - Configuring symfony/framework-bundle (>=4.4): From github.com/symfony/recipes:master
  - Configuring symfony/twig-bundle (>=4.4): From github.com/symfony/recipes:master
  - Configuring symfony/routing (>=4.2): From github.com/symfony/recipes:master
  - Configuring twig/extra-bundle (>=v3.0.1): From auto-generated recipe
  - Configuring doctrine/annotations (>=1.0): From github.com/symfony/recipes:master
  - Configuring sensio/framework-extra-bundle (>=5.2): From github.com/symfony/recipes:master
  - Configuring symfony/mailer (>=4.3): From github.com/symfony/recipes:master
  - Configuring symfony/console (>=4.4): From github.com/symfony/recipes:master
  - Configuring doctrine/doctrine-bundle (>=2.0): From github.com/symfony/recipes:master
  - Configuring doctrine/doctrine-migrations-bundle (>=1.2): From github.com/symfony/recipes:master
  - Configuring symfony/security-bundle (>=4.4): From github.com/symfony/recipes:master
  - Configuring symfony/translation (>=3.3): From github.com/symfony/recipes:master
  - Configuring symfony/validator (>=4.3): From github.com/symfony/recipes:master
  - Configuring symfony/web-profiler-bundle (>=3.3): From github.com/symfony/recipes:master
  - Configuring easycorp/easy-log-handler (>=1.0): From github.com/symfony/recipes:master
  - Configuring symfony/monolog-bundle (>=3.3): From github.com/symfony/recipes:master
  - Configuring symfony/debug-bundle (>=4.1): From github.com/symfony/recipes:master
  - Configuring symfony/maker-bundle (>=1.0): From github.com/symfony/recipes:master
  - Configuring symfony/phpunit-bridge (>=4.3): From github.com/symfony/recipes:master
ocramius/package-versions:  Generating version class...
ocramius/package-versions: ...done generating version class
Executing script cache:clear [OK]
Executing script assets:install public [OK]

Some files may have been created or updated to configure your new packages.
Please review, edit and commit them: these files are yours.

Some files may have been created or updated to configure your new packages.
Please review, edit and commit them: these files are yours.


 What's next?


  * Run your application:
    1. Go to the project directory
    2. Create your code repository with the git init command
    3. Download the Symfony CLI at https://symfony.com/download to install a development web server

  * Read the documentation at https://symfony.com/doc


 What's next?


  * You're ready to send emails.

  * If you want to send emails via a supported email provider, install
    the corresponding bridge.
    For instance, composer require mailgun-mailer for Mailgun.

  * If you want to send emails asynchronously:

    1. Install the messenger component by running composer require messenger;
    2. Add 'Symfony\Component\Mailer\Messenger\SendEmailMessage': amqp to the
       config/packages/messenger.yaml file under framework.messenger.routing
       and replace amqp with your transport name of choice.

  * Read the documentation at https://symfony.com/doc/master/mailer.html


 Database Configuration


  * Modify your DATABASE_URL config in .env

  * Configure the driver (mysql) and
    server_version (5.7) in config/packages/doctrine.yaml


 How to test?


  * Write test cases in the tests/ folder
  * Run php bin/phpunit



=========================================================================================

$ bin/console make:user

 The name of the security user class (e.g. User) [User]:
 >

 Do you want to store user data in the database (via Doctrine)? (yes/no) [yes]:
 >

 Enter a property name that will be the unique "display" name for the user (e.g. email, username, uuid) [email]:
 >

 Will this app need to hash/check user passwords? Choose No if passwords are not needed or will be checked/hashed by some other system (e.g. a single sign-on server).

 Does this app need to hash/check user passwords? (yes/no) [yes]:
 > no

 created: src/Entity/User.php
 created: src/Repository/UserRepository.php
 updated: src/Entity/User.php
 updated: config/packages/security.yaml


  Success!


 Next Steps:
   - Review your new App\Entity\User class.
   - Use make:entity to add more fields to your User entity and then run make:migration.
   - Create a way to authenticate! See https://symfony.com/doc/current/security.html

==================================================================
Regenerate Entity :
$ bin/console make:entity --regenerate


 This command will generate any missing methods (e.g. getters & setters) for a class or all classes in a namespace.

 To overwrite any existing methods, re-run this command with the --overwrite flag

 Enter a class or namespace to regenerate [App\Entity]:
 >

 updated: src/Entity/User.php


  Success!

========================================================================
CONFIGURATION .env file for connection to Database
/.env
DATABASE_URL=mysql://root:@127.0.0.1:3306/symfony_auth


=======================================================================
CREATE Database :
$ bin/console doctrine:database:create
Created database `symfony_auth` for connection named default

========================================================================
UPDATE SCHEMA :
$ bin/console doctrine:schema:update --force
 Updating database schema...

     1 query was executed


 [OK] Database schema updated successfully!

========================================================================
MYSQL :
 mysql -u root -p
Enter password:
Welcome to the MariaDB monitor.  Commands end with ; or \g.
Your MariaDB connection id is 55
Server version: 10.3.22-MariaDB-1:10.3.22+maria~bionic mariadb.org binary distribution

Copyright (c) 2000, 2018, Oracle, MariaDB Corporation Ab and others.

Type 'help;' or '\h' for help. Type '\c' to clear the current input statement.

MariaDB [(none)]> show databases;
+------------------------+
| Database               |
+------------------------+
| biblio_api             |
| information_schema     |
| laracasts_php          |
| mvclikepro             |
| mvclikeprologin        |
| mysql                  |
| performance_schema     |
| shop                   |
| skills                 |
| symfony_auth           |
| symfony_code_free_blog |
| symfonyskills          |
| webshake_blog          |
+------------------------+
13 rows in set (0.001 sec)

MariaDB [(none)]> use symfony_auth;
Reading table information for completion of table and column names
You can turn off this feature to get a quicker startup with -A

Database changed
MariaDB [symfony_auth]> show tables;
+------------------------+
| Tables_in_symfony_auth |
+------------------------+
| user                   |
+------------------------+
1 row in set (0.000 sec)

MariaDB [symfony_auth]> describe user;
+-------+--------------+------+-----+---------+----------------+
| Field | Type         | Null | Key | Default | Extra          |
+-------+--------------+------+-----+---------+----------------+
| id    | int(11)      | NO   | PRI | NULL    | auto_increment |
| email | varchar(180) | NO   | UNI | NULL    |                |
| token | varchar(100) | YES  |     | NULL    |                |
+-------+--------------+------+-----+---------+----------------+
3 rows in set (0.001 sec)

==============================================================
Symfony Make Auth :

$ bin/console make:auth
 What style of authentication do you want? [Empty authenticator]:
  [0] Empty authenticator
  [1] Login form authenticator
 > 1

 The class name of the authenticator to create (e.g. AppCustomAuthenticator):
 > CustomAuthenticator

 Choose a name for the controller class (e.g. SecurityController) [SecurityController]:
 >

 Do you want to generate a '/logout' URL? (yes/no) [yes]:
 >

 created: src/Security/CustomAuthenticator.php
 updated: config/packages/security.yaml
 created: src/Controller/SecurityController.php
 created: templates/security/login.html.twig


  Success!


 Next:
 - Customize your new authenticator.
 - Finish the redirect "TODO" in the App\Security\CustomAuthenticator::onAuthenticationSuccess() method.
 - Check the user's password in App\Security\CustomAuthenticator::checkCredentials().
 - Review & adapt the login template: templates/security/login.html.twig.

===========================================================================
INSERT FIRST USER in to database:
$ mysql -u root -p
Enter password:
Welcome to the MariaDB monitor.  Commands end with ; or \g.
Your MariaDB connection id is 55
Server version: 10.3.22-MariaDB-1:10.3.22+maria~bionic mariadb.org binary distribution

Copyright (c) 2000, 2018, Oracle, MariaDB Corporation Ab and others.

Type 'help;' or '\h' for help. Type '\c' to clear the current input statement.

MariaDB [(none)]> show databases;
+------------------------+
| Database               |
+------------------------+
| biblio_api             |
| information_schema     |
| laracasts_php          |
| mvclikepro             |
| mvclikeprologin        |
| mysql                  |
| performance_schema     |
| shop                   |
| skills                 |
| symfony_auth           |
| symfony_code_free_blog |
| symfonyskills          |
| webshake_blog          |
+------------------------+
13 rows in set (0.001 sec)

MariaDB [(none)]> use symfony_auth;
Reading table information for completion of table and column names
You can turn off this feature to get a quicker startup with -A

Database changed
MariaDB [symfony_auth]> show tables;
+------------------------+
| Tables_in_symfony_auth |
+------------------------+
| user                   |
+------------------------+
1 row in set (0.000 sec)

MariaDB [symfony_auth]> describe user;
+-------+--------------+------+-----+---------+----------------+
| Field | Type         | Null | Key | Default | Extra          |
+-------+--------------+------+-----+---------+----------------+
| id    | int(11)      | NO   | PRI | NULL    | auto_increment |
| email | varchar(180) | NO   | UNI | NULL    |                |
| token | varchar(100) | YES  |     | NULL    |                |
+-------+--------------+------+-----+---------+----------------+
3 rows in set (0.001 sec)
$ mysql -u root -p
Enter password:
Welcome to the MariaDB monitor.  Commands end with ; or \g.
Your MariaDB connection id is 55
Server version: 10.3.22-MariaDB-1:10.3.22+maria~bionic mariadb.org binary distribution

Copyright (c) 2000, 2018, Oracle, MariaDB Corporation Ab and others.

Type 'help;' or '\h' for help. Type '\c' to clear the current input statement.

MariaDB [(none)]> show databases;
+------------------------+
| Database               |
+------------------------+
| biblio_api             |
| information_schema     |
| laracasts_php          |
| mvclikepro             |
| mvclikeprologin        |
| mysql                  |
| performance_schema     |
| shop                   |
| skills                 |
| symfony_auth           |
| symfony_code_free_blog |
| symfonyskills          |
| webshake_blog          |
+------------------------+
13 rows in set (0.001 sec)

MariaDB [(none)]> use symfony_auth;
Reading table information for completion of table and column names
You can turn off this feature to get a quicker startup with -A

Database changed
MariaDB [symfony_auth]> show tables;
+------------------------+
| Tables_in_symfony_auth |
+------------------------+
| user                   |
+------------------------+
1 row in set (0.000 sec)

MariaDB [symfony_auth]> describe user;
+-------+--------------+------+-----+---------+----------------+
| Field | Type         | Null | Key | Default | Extra          |
+-------+--------------+------+-----+---------+----------------+
| id    | int(11)      | NO   | PRI | NULL    | auto_increment |
| email | varchar(180) | NO   | UNI | NULL    |                |
| token | varchar(100) | YES  |     | NULL    |                |
+-------+--------------+------+-----+---------+----------------+
3 rows in set (0.001 sec)

MariaDB [symfony_auth]> insert into (id, email) values (1, 'admin@admin.com');
ERROR 1064 (42000): You have an error in your SQL syntax; check the manual that corresponds to your MariaDB server version for the right syntax to use near '(id, email) values (1, 'admin@admin.com')' at line 1
MariaDB [symfony_auth]> ;
ERROR: No query specified

MariaDB [symfony_auth]> insert into user (id, email) values (1, 'admin@admin.com');
Query OK, 1 row affected (0.004 sec)


MariaDB [symfony_auth]> insert into user (id, email) values (1, 'admin@admin.com');
Query OK, 1 row affected (0.004 sec)

=======================================================================
$ composer require symfony/swiftmailer-bundle

Using version ^3.4 for symfony/swiftmailer-bundle
./composer.json has been updated
Loading composer repositories with package information
Updating dependencies (including require-dev)
Restricting packages listed in "symfony/symfony" to "4.4.*"
Package operations: 2 installs, 0 updates, 0 removals
  - Installing swiftmailer/swiftmailer (v6.2.3): Loading from cache
  - Installing symfony/swiftmailer-bundle (v3.4.0): Loading from cache
Package zendframework/zend-code is abandoned, you should avoid using it. Use laminas/laminas-code instead.
Package zendframework/zend-eventmanager is abandoned, you should avoid using it. Use laminas/laminas-eventmanager instead.
Writing lock file
Generating autoload files
ocramius/package-versions:  Generating version class...
ocramius/package-versions: ...done generating version class
Symfony operations: 1 recipe (2e9d43e35606ca07ed0bd44c8c1e9a66)
  - Configuring symfony/swiftmailer-bundle (>=2.5): From github.com/symfony/recipes:master
Executing script cache:clear [OK]
Executing script assets:install public [OK]

Some files may have been created or updated to configure your new packages.
Please review, edit and commit them: these files are yours.

===================================================================
Create a TokenAuthenticator :

$ bin/console make:auth

 What style of authentication do you want? [Empty authenticator]:
  [0] Empty authenticator
  [1] Login form authenticator
 > 0

 The class name of the authenticator to create (e.g. AppCustomAuthenticator):
 > TokenAuthenticator

 The entry point for your firewall is what should happen when an anonymous user tries to access
a protected page. For example, a common "entry point" behavior is to redirect to the login page.
The "entry point" behavior is controlled by the start() method on your authenticator.
However, you will now have multiple authenticators. You need to choose which authenticator's
start() method should be used as the entry point (the start() method on all other
authenticators will be ignored, and can be blank. [App\Security\CustomAuthenticator]:
  [0] App\Security\CustomAuthenticator
  [1] App\Security\TokenAuthenticator
 > 0

 created: src/Security/TokenAuthenticator.php
 updated: config/packages/security.yaml


  Success!


 Next:
 - Customize your new authenticator.

===================================================================

